version: "3.1"

intents:
  - greet
  - goodbye
  - affirm
  - deny
  - mood_great
  - mood_unhappy
  - bot_challenge
  - tell_time
  - provide_amount
  - request_promotions
  - help_size
  - reset_form
  - provide_group_category_name
  - provide_category
  - provide_brand_name
  - provide_clothes_size
  - provide_height
  - provide_weight
  - provide_shoes_size
  - provide_foot_length
  - provide_number
  - request_help_size_general
  - request_product_recommendation
  - provide_type
  - provide_material
  - provide_topic
  - provide_price
  - provide_multiple_recommendation_information
  - ask_tracking_order_status
  - ask_refund_products

actions:
  - action_greet_custom
  - action_show_time
  - action_general_promotions
  - action_detail_promotions
  - action_ask_group_category_name
  - action_ask_category
  - action_ask_brand_name
  - action_ask_knows_size
  - action_ask_clothes_size
  - action_ask_height
  - action_ask_weight
  - action_ask_shoes_size
  - action_ask_knows_foot_length
  - action_ask_foot_length
  - action_generate_size_recommendation
  - action_reset_slots
  - validate_size_form
  - action_ask_promotion_type
  - action_generate_promotions
  - validate_product_recommendation_form
  - action_ask_type
  - action_ask_knows_material
  - action_ask_material
  - action_ask_topic
  - action_ask_price
  - action_ask_knows_order_price
  - action_ask_recommendation_information
  - action_generate_product_recommendation
#  - action_set_promotion_type
#  - action_set_promotion_price
  - validate_promotion_form
  - action_guide_tracking_order_status
  - action_guide_refund_products
  - action_inform_restart
  - action_handle_out_of_scope

entities:
  - promotion_type
  - promotion_type_amount
  - group_category_name
  - category
  - brand_name
  - clothes_size
  - height
  - weight
  - shoes_size
  - foot_length
  - number
  - amount
  - type
  - knows_material
  - material
  - topic
  - price
  - noun
  - adjective
  - price_description

slots:
  promotion_type:
    type: list
    influence_conversation: true
    mappings:
    - type: from_entity
      entity: promotion_type
      intent: request_promotions
      conditions:
      - active_loop: promotion_form
        requested_slot: promotion_type
    - type: from_entity
      entity: promotion_type
      intent: request_promotions
      conditions:
      - active_loop: null

  promotion_type_amount:
    type: categorical
    values:
      - "All"
      - "Both"
      - "One"
    influence_conversation: true
    mappings:
    - type: from_entity
      entity: promotion_type_amount
      intent: provide_amount
    - type: from_entity
      entity: promotion_type_amount
      intent: request_promotions
    - type: from_entity
      entity: promotion_type_amount
      intent: request_promotions
      conditions:
      - active_loop: promotion_form
        requested_slot: promotion_type_amount
    - type: from_entity
      entity: promotion_type_amount
      intent: request_promotions
      conditions:
      - active_loop: null
    - type: from_entity
      entity: amount
      intent: provide_amount
      conditions:
      - active_loop: promotion_form
    - type: from_entity
      entity: amount
      intent: provide_amount
      conditions:
      - active_loop: null

  group_category_name:
    type: categorical
    values:
      - "Men's Fashion"
      - "Women's Fashion"
      - "Kid's Fashion"
    influence_conversation: true
    mappings:
    - type: from_entity
      entity: group_category_name
      intent: provide_group_category_name
      conditions:
      - active_loop: size_form
        requested_slot: group_category_name
    - type: from_entity
      entity: group_category_name
      intent: provide_group_category_name
      conditions:
      - active_loop: null
    - type: from_entity
      entity: group_category_name
      conditions:
      - active_loop: null
    - type: from_entity
      entity: group_category_name
      intent: request_help_size_general
      conditions:
      - active_loop: size_form
        requested_slot: group_category_name
    - type: from_entity
      entity: group_category_name
      intent: request_help_size_general
      conditions:
      - active_loop: null
    - type: from_entity
      entity: group_category_name
      intent: provide_group_category_name
      conditions:
      - active_loop: product_recommendation_form
        requested_slot: group_category_name
    - type: from_entity
      entity: group_category_name
      intent: provide_multiple_recommendation_information
      conditions:
      - active_loop: product_recommendation_form
        requested_slot: group_category_name
    - type: from_entity
      entity: group_category_name
      intent: provide_multiple_recommendation_information
      conditions:
      - active_loop: null

  category:
    type: categorical
    values:
      - "Shirts"
      - "Pants"
      - "Shoes"
      - "Accessories"
      - "Dresses"
      - "Outerwear"
      - "Swimwear"
    influence_conversation: true
    mappings:
    - type: from_entity
      entity: category
      intent: provide_category
      conditions:
      - active_loop: size_form
        requested_slot: category
    - type: from_entity
      entity: category
      intent: provide_category
      conditions:
      - active_loop: null
    - type: from_entity
      entity: category
      conditions:
      - active_loop: null
    - type: from_entity
      entity: category
      intent: request_help_size_general
      conditions:
      - active_loop: size_form
        requested_slot: category
    - type: from_entity
      entity: category
      intent: request_help_size_general
      conditions:
      - active_loop: null
    - type: from_entity
      entity: category
      intent: provide_category
      conditions:
      - active_loop: product_recommendation_form
        requested_slot: category
    - type: from_entity
      entity: category
      intent: provide_type
      conditions:
      - active_loop: product_recommendation_form
        requested_slot: category
    - type: from_entity
      entity: category
      intent: provide_multiple_recommendation_information
      conditions:
      - active_loop: product_recommendation_form
        requested_slot: category
    - type: from_entity
      entity: category
      intent: provide_multiple_recommendation_information
      conditions:
        - active_loop: null

  brand_name:
    type: categorical
    values:
      - "H&M"
      - "Zara"
      - "Gucci"
      - "Nike"
      - "Adidas"
      - "Biti's"
      - "Bloom"
      - "Coolmate"
      - "Everest"
      - "Puma"
      - "Routine"
      - "Uniqlo"
    influence_conversation: true
    mappings:
    - type: from_entity
      entity: brand_name
      intent: provide_brand_name
      conditions:
      - active_loop: size_form
        requested_slot: brand_name
    - type: from_entity
      entity: brand_name
      intent: provide_brand_name
      conditions:
      - active_loop: null
    - type: from_entity
      entity: brand_name
      conditions:
      - active_loop: null
    - type: from_entity
      entity: brand_name
      intent: request_help_size_general
      conditions:
      - active_loop: size_form
        requested_slot: brand_name
    - type: from_entity
      entity: brand_name
      intent: request_help_size_general
      conditions:
      - active_loop: null
    - type: from_entity
      entity: brand_name
      intent: provide_brand_name
      conditions:
      - active_loop: product_recommendation_form
        requested_slot: brand_name
    - type: from_entity
      entity: brand_name
      intent: provide_multiple_recommendation_information
      conditions:
      - active_loop: product_recommendation_form
        requested_slot: brand_name
    - type: from_entity
      entity: brand_name
      intent: provide_multiple_recommendation_information
      conditions:
      - active_loop: null

  clothes_size:
    type: categorical
    values:
      - "S"
      - "M"
      - "L"
      - "XL"
    influence_conversation: true
    mappings:
    - type: from_entity
      entity: clothes_size
      intent: provide_clothes_size
      conditions:
      - active_loop: size_form
        requested_slot: clothes_size
    - type: from_entity
      entity: clothes_size
      intent: provide_clothes_size
      conditions:
      - active_loop: null
    - type: from_entity
      entity: clothes_size
      conditions:
      - active_loop: null
    - type: from_entity
      entity: clothes_size
      intent: provide_clothes_size
      conditions:
      - active_loop: size_form
        requested_slot: knows_size

  height:
    type: float
    influence_conversation: true
    mappings:
    - type: from_entity
      entity: height
      intent: provide_height
      conditions:
      - active_loop: size_form
        requested_slot: height
    - type: from_entity
      entity: number
      intent: provide_number
      conditions:
      - active_loop: size_form
        requested_slot: height
    - type: from_entity
      entity: height
      intent: request_help_size_general
      conditions:
      - active_loop: null

  weight:
    type: float
    influence_conversation: true
    mappings:
    - type: from_entity
      entity: weight
      intent: provide_weight
      conditions:
      - active_loop: size_form
        requested_slot: weight
    - type: from_entity
      entity: number
      intent: provide_number
      conditions:
      - active_loop: size_form
        requested_slot: weight
    - type: from_entity
      entity: weight
      intent: request_help_size_general
      conditions:
      - active_loop: null

  shoes_size:
    type: float
    influence_conversation: true
    mappings:
    - type: from_entity
      entity: shoes_size
      intent: provide_shoes_size
      conditions:
      - active_loop: size_form
        requested_slot: shoes_size
    - type: from_entity
      entity: number
      intent: provide_number
      conditions:
      - active_loop: size_form
        requested_slot: shoes_size
    - type: from_entity
      entity: shoes_size
      intent: provide_shoes_size
      conditions:
      - active_loop: size_form
        requested_slot: knows_size
    - type: from_entity
      entity: number
      intent: provide_number
      conditions:
      - active_loop: size_form
        requested_slot: knows_size

  foot_length:
    type: float
    influence_conversation: true
    mappings:
    - type: from_entity
      entity: foot_length
      intent: provide_foot_length
      conditions:
      - active_loop: size_form
        requested_slot: foot_length
    - type: from_entity
      entity: number
      intent: provide_number
      conditions:
      - active_loop: size_form
        requested_slot: foot_length
    - type: from_entity
      entity: foot_length
      intent: request_help_size_general
      conditions:
      - active_loop: null
    - type: from_entity
      entity: foot_length
      intent: provide_foot_length
      conditions:
      - active_loop: size_form
        requested_slot: knows_foot_length

  knows_size:
    type: bool
    influence_conversation: true
    mappings:
    - type: from_intent
      value: true
      intent: affirm
      conditions:
      - active_loop: size_form
        requested_slot: knows_size
    - type: from_intent
      value: false
      intent: deny
      conditions:
      - active_loop: size_form
        requested_slot: knows_size

  knows_foot_length:
    type: bool
    influence_conversation: true
    mappings:
      - type: from_intent
        value: true
        intent: affirm
        conditions:
        - active_loop: size_form
          requested_slot: knows_foot_length
      - type: from_intent
        value: false
        intent: deny
        conditions:
        - active_loop: size_form
          requested_slot: knows_foot_length

  number:
    type: float
    mappings:
      - type: from_entity
        entity: number

  amount:
    type: categorical
    values:
      - "All"
      - "Both"
      - "One"
    mappings:
      - type: from_entity
        entity: amount

  type:
    type: text
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: type
        intent: provide_type
        conditions:
        - active_loop: product_recommendation_form
          requested_slot: type
      - type: from_entity
        entity: type
        intent: provide_type
        conditions:
        - active_loop: null
      - type: from_entity
        entity: type
        intent: provide_multiple_recommendation_information
        conditions:
        - active_loop: product_recommendation_form
          requested_slot: type
      - type: from_entity
        entity: type
        intent: provide_multiple_recommendation_information
        conditions:
        - active_loop: null

  material:
    type: list
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: material
        intent: provide_material
        conditions:
        - active_loop: product_recommendation_form
          requested_slot: material
      - type: from_entity
        entity: material
        intent: provide_material
        conditions:
        - active_loop: null
      - type: from_entity
        entity: material
        intent: provide_multiple_recommendation_information
        conditions:
        - active_loop: product_recommendation_form
          requested_slot: material
      - type: from_entity
        entity: material
        intent: provide_multiple_recommendation_information
        conditions:
        - active_loop: null
      - type: from_entity
        entity: material
        conditions:
        - active_loop: product_recommendation_form
          requested_slot: material
      - type: from_entity
        entity: material
        conditions:
        - active_loop: null
      - type: from_entity
        entity: material
        intent: provide_material
        conditions:
        - active_loop: product_recommendation_form
          requested_slot: knows_material

  knows_material:
    type: bool
    influence_conversation: true
    mappings:
      - type: from_intent
        value: true
        intent: affirm
        conditions:
        - active_loop: product_recommendation_form
          requested_slot: knows_material
      - type: from_intent
        value: false
        intent: deny
        conditions:
        - active_loop: product_recommendation_form
          requested_slot: knows_material

  topic:
    type: list
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: topic
        intent: provide_topic
        conditions:
        - active_loop: product_recommendation_form
          requested_slot: topic
      - type: from_entity
        entity: topic
        intent: provide_topic
        conditions:
        - active_loop: null
      - type: from_entity
        entity: topic
        intent: provide_multiple_recommendation_information
        conditions:
        - active_loop: product_recommendation_form
          requested_slot: topic
      - type: from_entity
        entity: topic
        intent: provide_multiple_recommendation_information
        conditions:
        - active_loop: null

  knows_order_price:
    type: bool
    influence_conversation: true
    mappings:
      - type: from_intent
        value: true
        intent: affirm
        conditions:
        - active_loop: promotion_form
          requested_slot: knows_order_price
      - type: from_intent
        value: false
        intent: deny
        conditions:
        - active_loop: promotion_form
          requested_slot: knows_order_price

  price:
    type: list
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: price
        intent: provide_price
        conditions:
        - active_loop: product_recommendation_form
          requested_slot: price
      - type: from_entity
        entity: price
        intent: provide_price
        conditions:
        - active_loop: null
      - type: from_entity
        entity: number
        intent: provide_number
        conditions:
        - active_loop: product_recommendation_form
          requested_slot: price
      - type: from_entity
        entity: price
        intent: provide_multiple_recommendation_information
        conditions:
        - active_loop: product_recommendation_form
          requested_slot: price
      - type: from_entity
        entity: price
        intent: provide_multiple_recommendation_information
        conditions:
        - active_loop: null
      - type: from_entity
        entity: price
        intent: request_promotions
        conditions:
        - active_loop: null
      - type: from_entity
        entity: price
        intent: provide_price
        conditions:
        - active_loop: promotion_form
          requested_slot: price
      - type: from_entity
        entity: number
        intent: provide_number
        conditions:
        - active_loop: promotion_form
          requested_slot: price
      - type: from_entity
        entity: price
        intent: provide_price
        conditions:
        - active_loop: promotion_form
          requested_slot: knows_order_price
      - type: from_entity
        entity: number
        intent: provide_number
        conditions:
        - active_loop: promotion_form
          requested_slot: knows_order_price

  price_description:
    type: list
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: price_description
        intent: provide_price
        conditions:
        - active_loop: product_recommendation_form
          requested_slot: price
      - type: from_entity
        entity: price_description
        intent: provide_multiple_recommendation_information
        conditions:
        - active_loop: null
      - type: from_entity
        entity: price_description
        intent: request_promotions
        conditions:
        - active_loop: null
      - type: from_entity
        entity: price_description
        intent: provide_price
        conditions:
        - active_loop: promotion_form

  help_type:
    type: text
    influence_conversation: true
    mappings:
      - type: from_intent
        value: "help_size"
        intent: request_help_size_general
      - type: from_intent
        value: "help_size"
        intent: help_size

  noun:
    type: list
    mappings:
      - type: from_entity
        entity: noun
        intent: provide_multiple_recommendation_information
        conditions:
        - active_loop: null

  adjective:
    type: list
    mappings:
      - type: from_entity
        entity: adjective
        intent: provide_multiple_recommendation_information
        conditions:
        - active_loop: null

#  promotion_type:
#    type: text
#    mappings:
#      - type: from_entity
#        entity: promotion_type

responses:
  utter_greet:
  - text: "Greeting, I am your virtual assistant how can I help you ?"
  - text: "Hi there, welcome to our shop. If want to know anything about the products you can ask me"
  - text: "Welcome our valuable guest. If you need any help, just ask me"

  utter_cheer_up:
  - text: "Here is something to cheer you up:"
    image: "https://i.imgur.com/nGF1K8f.jpg"

  utter_did_that_help:
  - text: "Did that help you?"

  utter_happy:
  - text: "Great, carry on!"

  utter_goodbye:
  - text: "Bye"

  utter_iamabot:
  - text: "I am a bot, powered by Rasa."

  utter_restart_form:
    - text: "Alright everything is reset. How can I help you?"

forms:
  size_form:
    required_slots:
      - group_category_name
      - category
      - brand_name
      - knows_size
      - clothes_size
      - height
      - weight
      - shoes_size
      - knows_foot_length
      - foot_length
      - help_type

  promotion_form:
    required_slots:
      - promotion_type
      - promotion_type_amount
      - knows_order_price
      - price

  product_recommendation_form:
    required_slots:
      - group_category_name
      - category
      - type
      - topic
      - brand_name
      - price
      - knows_material
      - material

session_config:
  session_expiration_time: 60
  carry_over_slots_to_new_session: true